<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Painel do Gerente - Olha o G√°s üí®</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>üë®‚Äçüíº Painel do Gerente</h1>
  </header>

  <main class="painel-gerente">
    <!-- Cadastro de vendedores -->
    <section class="cadastro-vendedor">
      <h2>Cadastrar novo vendedor</h2>
      <input type="text" id="nome" placeholder="Nome do vendedor">
      <input type="password" id="senha" placeholder="Senha">
      <input type="text" id="marca" placeholder="Marca do g√°s (ex: Ultragaz)">
      <input type="number" id="preco" placeholder="Pre√ßo 13kg (R$)">
      <input type="file" id="foto" accept="image/*">
      <button id="btnCadastrar">Cadastrar Vendedor</button>
    </section>

    <!-- Lista de vendedores -->
    <section class="lista-vendedores">
      <h2>Lista de vendedores</h2>
      <div id="listaVendedores"></div>
    </section>

    <!-- NOVA SE√á√ÉO: Lista de clientes -->
    <section class="lista-vendedores">
      <h2>Lista de clientes</h2>
      <div id="listaClientes"></div>
    </section>
  </main>

  <script>
    // Recupera usu√°rios
    let usuarios = JSON.parse(localStorage.getItem("usuarios")) || [];

    // ====== Listar Vendedores ======
    const divVend = document.getElementById("listaVendedores");
    function carregarVendedores() {
      divVend.innerHTML = "";
      const vendedores = usuarios.filter(u => u.tipo === "vendedor");
      vendedores.forEach(v => {
        const card = document.createElement("div");
        card.className = "vendedor-card";
        card.innerHTML = `
          <img src="${v.foto || 'https://via.placeholder.com/150'}" class="foto-vendedor">
          <div class="info">
            <h3>${v.nome}</h3>
            <p>${v.marca || "Marca n√£o informada"}</p>
            <p><strong>R$ ${v.preco || "--"}</strong></p>
            <button class="btn-excluir" onclick="excluirUsuario(${v.id})">Excluir</button>
          </div>
        `;
        divVend.appendChild(card);
      });
    }

    // ====== Listar Clientes ======
    const divCli = document.getElementById("listaClientes");
    function carregarClientes() {
      divCli.innerHTML = "";
      const clientes = usuarios.filter(u => u.tipo === "cliente");
      clientes.forEach(c => {
        const card = document.createElement("div");
        card.className = "vendedor-card";
        card.innerHTML = `
          <div class="info">
            <h3>${c.nome}</h3>
            <p>${c.endereco.rua}, ${c.endereco.numero}</p>
            <p>${c.endereco.bairro} - ${c.endereco.cidade}/${c.endereco.estado}</p>
            <button class="btn-excluir" onclick="excluirUsuario(${c.id})">Excluir</button>
          </div>
        `;
        divCli.appendChild(card);
      });
    }

    // ====== Excluir Usu√°rio ======
    function excluirUsuario(id) {
      if (confirm("Deseja realmente excluir este usu√°rio?")) {
        usuarios = usuarios.filter(u => u.id !== id);
        localStorage.setItem("usuarios", JSON.stringify(usuarios));
        carregarVendedores();
        carregarClientes();
      }
    }

    // ====== Cadastrar Vendedor ======
    document.getElementById("btnCadastrar").addEventListener("click", () => {
      const nome = document.getElementById("nome").value.trim();
      const senha = document.getElementById("senha").value.trim();
      const marca = document.getElementById("marca").value.trim();
      const preco = document.getElementById("preco").value.trim();
      const fotoInput = document.getElementById("foto");
      const file = fotoInput.files[0];

      if (!nome || !senha) {
        alert("Preencha o nome e a senha.");
        return;
      }

      let novo = {
        id: Date.now(),
        nome,
        senha,
        tipo: "vendedor",
        marca,
        preco,
        foto: "",
        status: false
      };

      if (file) {
        const reader = new FileReader();
        reader.onloadend = () => {
          novo.foto = reader.result;
          salvarUsuario(novo);
        };
        reader.readAsDataURL(file);
      } else {
        salvarUsuario(novo);
      }
    });

    function salvarUsuario(user) {
      usuarios.push(user);
      localStorage.setItem("usuarios", JSON.stringify(usuarios));
      alert("Vendedor cadastrado com sucesso!");
      carregarVendedores();
    }

    // Inicializa√ß√£o
    carregarVendedores();
    carregarClientes();
  </script>
</body>
</html>
